<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forma | Projects</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        /* --- RESET & VARIABLES --- */
        :root {
            --font-main: "Montserrat", sans-serif;
            --color-bg: #d1cfc3;
            --color-text: #1d1919;
            --ease-out-expo: cubic-bezier(0.19, 1, 0.22, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: var(--font-main);
            background-color: var(--color-bg);
            color: var(--color-text);
            /* CHANGED: Fixed height, no scroll */
            height: 100vh;
            width: 100%;
            overflow: hidden; 
            position: relative;
        }

        a { text-decoration: none; color: inherit; transition: opacity 0.3s; }
        
        /* Disable default hover opacity for the transition dummy to prevent flicker */
        a.transitioning { opacity: 1 !important; }

        /* --- HEADER (Fixed) --- */
        header {
            position: fixed; 
            top: 0; left: 0; width: 100%;
            padding: 30px 50px; /* Reduced padding slightly */
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            z-index: 50;
            pointer-events: none; 
        }
        header > * { pointer-events: auto; }

        .logo-img { width: 120px; height: auto; mix-blend-mode: multiply; } /* Smaller logo */
        .page-title { font-weight: 700; font-size: 1rem; text-transform: lowercase; margin-top: 10px; }

        /* --- MAIN LAYOUT --- */
        main {
            width: 100%;
            height: 100vh;
            /* Adjust padding to center content between header/footer */
            padding-top: 100px;
            padding-bottom: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center; /* Center vertically */
            gap: 5vh; /* Much smaller gap */
        }

        /* Common Project Styles */
        .project-card {
            position: relative; 
            display: flex;
            align-items: center; /* Center items vertically */
            gap: 20px;
            /* Reduced width to fit two in viewport */
            width: 42vw; 
            max-width: 600px;
            /* opacity transition handled by JS during page transition */
        }

        .project-img-box {
            width: 55%;
            aspect-ratio: 16/10;
            overflow: hidden;
            position: relative; /* Context for image */
        }

        .project-img {
            width: 100%; height: 100%; object-fit: cover;
            display: block;
            transition: transform 0.8s ease;
            transform-origin: center center;
        }
        
        .project-card:hover .project-img { transform: scale(1.03); }

        .project-info {
            width: 45%;
            padding-top: 0;
            display: flex;
            flex-direction: column;
        }

        .p-title {
            font-weight: 800;
            font-size: 1.2rem; /* Slightly smaller font */
            margin-bottom: 8px;
            text-transform: lowercase;
        }

        .p-meta {
            font-size: 0.75rem; /* Slightly smaller font */
            line-height: 1.4;
            color: #333;
            font-weight: 500;
        }

        .p-desc {
            margin-top: 12px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            /* Ensure text doesn't overflow if it's too long */
            display: -webkit-box;
            -webkit-line-clamp: 4;
            -webkit-box-orient: vertical;  
            overflow: hidden;
        }

        .p-desc.reveal {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- STAGGERED LAYOUT LOGIC --- */
        .project-card:nth-child(odd) {
            align-self: flex-start;
            margin-left: 8%; 
        }

        .project-card:nth-child(even) {
            align-self: flex-end;
            margin-right: 8%; 
            flex-direction: row-reverse;
        }
        
        .project-card:nth-child(even) .project-info {
            text-align: right;
        }

        /* --- PAGINATION NAV BUTTONS --- */
        .pagination-nav {
            position: fixed;
            bottom: 85px; 
            left: 0;
            width: 100%;
            padding: 0 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 45; 
            pointer-events: none; 
        }
        
        .pagination-btn {
            pointer-events: auto;
            font-weight: 700;
            font-size: 0.9rem;
            text-transform: lowercase;
            color: var(--color-text);
            cursor: pointer;
            letter-spacing: 0.02em;
            position: relative;
            overflow: hidden;
        }
        
        .pagination-btn::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background-color: currentColor;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        .pagination-btn:hover::after {
            transform: translateX(0);
        }

        /* --- FOOTER (Fixed) --- */
        .footer-nav {
            position: fixed; 
            bottom: 30px; left: 0; width: 100%;
            padding: 0 50px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            z-index: 50;
            pointer-events: none;
        }
        .footer-nav > * { pointer-events: auto; }

        .footer-link {
            font-weight: 700;
            font-size: 1.1rem;
            text-transform: lowercase;
        }
        
        .footer-center {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        /* --- TRANSITION OVERLAY LAYER --- */
        .transition-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 999;
            pointer-events: none;
            display: none; /* Hidden by default */
        }

        .transition-img {
            position: absolute;
            object-fit: cover;
            /* Will be animated via JS */
            transition: all 1.2s var(--ease-out-expo); 
        }

        /* --- MOBILE RESPONSIVENESS --- */
        @media (max-width: 768px) {
            body { height: auto; overflow-y: auto; } /* Allow scroll on mobile */
            header { position: relative; padding: 30px 20px; margin-bottom: 20px; }
            .logo-img { width: 100px; }
            .page-title { font-size: 1rem; }

            main { 
                padding-top: 0; 
                padding-bottom: 60px;
                gap: 60px; 
                height: auto;
                justify-content: flex-start;
            }

            .project-card {
                width: 100%; max-width: 100%;
                margin: 0 !important; 
                flex-direction: column !important; 
                padding: 0 20px;
                align-self: center !important;
            }

            .project-img-box { width: 100%; aspect-ratio: 4/3; }
            .project-info { width: 100%; text-align: left !important; margin-top: 20px; }

            .pagination-nav {
                position: relative; 
                bottom: auto;
                padding: 20px 20px 0 20px;
                margin-top: 20px;
                flex-direction: row; 
            }

            .footer-nav {
                position: relative; 
                margin-top: 30px;
                padding-bottom: 40px;
                flex-direction: column;
                gap: 20px;
                align-items: center;
                text-align: center;
                bottom: auto;
            }
            .footer-center { position: relative; left: auto; transform: none; }
        }
    </style>
</head>
<body>

    <header>
        <div class="logo-container">
            <img src="/Main Logo - Dark brown - without byline.svg" alt="forma" class="logo-img">
        </div>
        <div class="page-title">projects</div>
    </header>

    <main>

        <!-- Project 1 (Left / Odd) -->
        <a href="#" class="project-card">
            <div class="project-img-box">
                <img src="/demo.png" alt="Project 1" class="project-img" id="img-project-1">
            </div>
            <div class="project-info">
                <div class="p-title">the aerie</div>
                <div class="p-meta">
                    Area: 0000 sqft <br>
                    Budget: Rs. 00 cr <br>
                    Location: Kotagiri, Tamil Nadu <br>
                    Year: 2024
                </div>
                <div class="p-meta p-desc">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Beatae alias dolor saepe placeat fugiat quaerat rem deserunt iusto quisquam?</p>
                </div>
            </div>
        </a>

        <!-- Project 2 (Right / Even) -->
        <a href="#" class="project-card">
            <div class="project-img-box">
                <img src="/demo.png" alt="Project 2" class="project-img" id="img-project-2">
            </div>
            <div class="project-info">
                <div class="p-title">the aerie</div>
                <div class="p-meta">
                    Area: 0000 sqft <br>
                    Budget: Rs. 00 cr <br>
                    Location: Kotagiri, Tamil Nadu <br>
                    Year: 2024
                </div>
                <div class="p-meta p-desc">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Nisi totam doloribus temporibus et optio vero laborum blanditiis nostrum nihil.</p>
                </div>
            </div>
        </a>
        
        <!-- Project 3 - Commented out to ensure only 2 are shown as per "no scroll" request -->
        <!-- 
        <a href="#" class="project-card">
            <div class="project-img-box">
                <img src="/Forma/demo.png" alt="Project 3" class="project-img" id="img-project-3">
            </div>
            <div class="project-info">
               ...
            </div>
        </a> 
        -->

    </main>

    <!-- Pagination Buttons -->
    <div class="pagination-nav">
        <!-- Prev calls animation logic for Left -->
        <div class="pagination-btn" id="btn-prev">previous project</div>
        <!-- Next calls animation logic for Right -->
        <div class="pagination-btn" id="btn-next">next project</div>
    </div>

    <nav class="footer-nav">
        <a href="contact.html" class="footer-link">contact</a>
        <a href="services.html" class="footer-link footer-center">services</a>
        <a href="forma.html" class="footer-link">home</a>
    </nav>

    <!-- Hidden layer for transition animation -->
    <div class="transition-layer" id="transition-layer"></div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- 1. AUTO REVEAL LOGIC (Replaced Scroll Trigger) ---
            // Triggers shortly after load since everything is in viewport
            setTimeout(() => {
                document.querySelectorAll('.p-desc').forEach((desc, index) => {
                    setTimeout(() => {
                        desc.classList.add('reveal');
                    }, index * 200); // Stagger the reveal slightly
                });
            }, 500);


            // --- 2. TRANSITION ANIMATION LOGIC ---
            const transitionLayer = document.getElementById('transition-layer');
            const btnPrev = document.getElementById('btn-prev');
            const btnNext = document.getElementById('btn-next');

            // Select generic images for demo (in real app, use logic to find specific ID)
            // Odd = Left, Even = Right in CSS
            const leftImage = document.querySelector('.project-card:nth-child(1) .project-img');
            const rightImage = document.querySelector('.project-card:nth-child(2) .project-img');

            function startTransition(sourceImg, direction) {
                if (!sourceImg) return;

                // 1. Get position of source image
                const rect = sourceImg.getBoundingClientRect();

                // 2. Create a clone for the animation layer
                const clone = document.createElement('img');
                clone.src = sourceImg.src;
                clone.className = 'transition-img';
                
                // 3. Set initial position to match the existing image exactly
                clone.style.width = `${rect.width}px`;
                clone.style.height = `${rect.height}px`;
                clone.style.top = `${rect.top}px`;
                clone.style.left = `${rect.left}px`;
                
                transitionLayer.innerHTML = ''; // Clear old
                transitionLayer.appendChild(clone);
                transitionLayer.style.display = 'block';

                // 4. Force reflow so browser accepts starting position
                void clone.offsetWidth; 

                // 5. Animate to Full Screen
                clone.style.top = '0px';
                clone.style.left = '0px';
                clone.style.width = '100vw';
                clone.style.height = '100vh';

                // 6. Navigate after animation completes
                setTimeout(() => {
                    // Navigate to projects1.html with transition param
                    const newUrl = `project1.html?transition=${direction}`;
                    window.location.href = newUrl;
                }, 1200); // Matches CSS transition time
            }

            // Click Handlers
            btnNext.addEventListener('click', (e) => {
                e.preventDefault();
                // "Next" (Right) -> Animate right image
                startTransition(rightImage, 'next');
            });

            btnPrev.addEventListener('click', (e) => {
                e.preventDefault();
                // "Prev" (Left) -> Animate left image
                startTransition(leftImage, 'prev');
            });


            // --- 3. ENTRANCE ANIMATION (ZOOM OUT) ---
            // Check if we just arrived from a transition
            const urlParams = new URLSearchParams(window.location.search);
            const transitionType = urlParams.get('transition');

            if (transitionType) {
                // If we have a param, it means we are "entering" the new page
                // We need to simulate the "Zoom Out" from the hero image
                
                // Pick a target to zoom OUT to (usually the first image on the new page)
                // For demo, we use the first image
                const targetImg = document.querySelector('.project-card:nth-child(1) .project-img');
                
                if (targetImg) {
                    // 1. Prepare Overlay
                    const rect = targetImg.getBoundingClientRect();
                    const clone = document.createElement('img');
                    clone.src = targetImg.src;
                    clone.className = 'transition-img';
                    
                    // Start FULL SCREEN
                    clone.style.top = '0px';
                    clone.style.left = '0px';
                    clone.style.width = '100vw';
                    clone.style.height = '100vh';
                    
                    transitionLayer.innerHTML = '';
                    transitionLayer.appendChild(clone);
                    transitionLayer.style.display = 'block';
                    
                    // Hide the real image temporarily so it doesn't double up
                    targetImg.style.opacity = '0';

                    // 2. Animate DOWN to target position
                    // We need a slight delay to ensure the browser has rendered the full screen first
                    setTimeout(() => {
                        clone.style.width = `${rect.width}px`;
                        clone.style.height = `${rect.height}px`;
                        clone.style.top = `${rect.top}px`;
                        clone.style.left = `${rect.left}px`;
                    }, 50);

                    // 3. Cleanup after animation
                    setTimeout(() => {
                        targetImg.style.opacity = '1';
                        transitionLayer.style.display = 'none';
                        // Clean URL
                        window.history.replaceState({}, document.title, window.location.pathname);
                    }, 1250);
                }
            }
        });
    </script>
    
</body>
</html>